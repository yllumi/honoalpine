<div id="home" x-data="home">
  <ha-header title="Homepage"></ha-header>

  <div id="appCapsule" class="px-3">
    <div class="blog-list mt-2">
      <template x-for="item in blog" :key="item.id">
        <div class="card mb-2 p-2">
          <h3 x-text="item.title" class="h3 mb-3"></h3>
          <p x-html="item.content" class="lead"></p>
        </div>
      </template>
      
      <template x-if="blog.length === 0">
        <p>Memuat konten...</p>
      </template>
    </div>
  </div>

  <ha-bottommenu></ha-bottommenu>
</div>

<script>
  Alpine.data("home", function () {
    return {
      description: "Artikel Terbaru",
      blog: [],

      async init() {
        Alpine.store('core').module = 'home';

        try {
          // Fetch data dari rute Hono (asumsi rute backend di /api/home)
          const response = await fetch('/api/home'); 
          const result = await response.json();

          if (result.status === 'ok') {
            this.blog = result.data;
          }
        } catch (err) {
          console.error("Gagal fetch blog:", err);
          this.description = "Gagal memuat artikel.";
        }
      },
    };
  });
</script>