<style>
  #home .card {
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    background-color: #ffffff;
  }
</style>

<section id="home" x-data="home">
  <ha-header :title="title"></ha-header>

  <div id="appCapsule" class="px-3">
    <div class="blog-list mt-2">
      <template x-for="item in blog" :key="item.id">
        <div class="card mb-2 p-2">
          <h3 x-text="item.title" class="h3 mb-3"></h3>
          <p x-html="item.content" class="lead"></p>
        </div>
      </template>
      
      <template x-if="blog.length === 0">
        <p>Memuat konten...</p>
      </template>
    </div>
  </div>

  <ha-bottommenu></ha-bottommenu>
</section>

<script>
  Alpine.data("home", function () {
    return {
      title: "Beranda",
      description: "Artikel Terbaru",
      blog: [],

      async init() {
        Alpine.store('core').module = 'home';

        try {
          // Fetch data dari rute Hono menggunakan $heroicHelper
          const response = await $heroicHelper.fetch('api/home'); 
          const result = response.data; // response.data sudah berisi parsed JSON

          if (result.status === 'ok') {
            this.blog = result.data;
          }
        } catch (err) {
          console.error("Gagal fetch blog:", err);
          this.description = "Gagal memuat artikel.";
        }
      },
    };
  });
</script>